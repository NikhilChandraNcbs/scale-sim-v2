printing entry
['Conv1', 224, 224, 11, 11, 3, 96, 4, 4, None]
printing entry
['Conv2', 207, 207, 5, 5, 96, 256, 1, 1, None]
printing entry
['Conv3', 13, 13, 3, 3, 256, 384, 1, 1, None]
printing entry
['Conv4', 13, 13, 3, 3, 384, 384, 1, 1, None]
printing entry
['Conv5', 13, 13, 3, 3, 384, 256, 1, 1, None]
====================================================
******************* SCALE SIM **********************
====================================================
Array Size: 	128x128
SRAM IFMAP (kB): 	102400
SRAM Filter (kB): 	102400
SRAM OFMAP (kB): 	102400
Dataflow: 	Weight Stationary
CSV file path: 	topologies/conv_nets/alexnet_full.csv
Bandwidth: 	50
Working in USE USER BANDWIDTH mode.
====================================================

Running Layer 0
self.filter_addr_matrix
(363, 96)
[[  100   463   826 ... 33859 34222 34585]
 [  101   464   827 ... 33860 34223 34586]
 [  102   465   828 ... 33861 34224 34587]
 ...
 [  460   823  1186 ... 34219 34582 34945]
 [  461   824  1187 ... 34220 34583 34946]
 [  462   825  1188 ... 34221 34584 34947]]
SPARSITY INSIDE FILTER DEMAND MATRIX CREATION
No sparsity file - creating bitmap
[[1 1 1 ... 1 1 1]
 [1 1 1 ... 1 1 1]
 [0 0 0 ... 0 0 0]
 ...
 [1 1 1 ... 1 1 1]
 [1 1 1 ... 1 1 1]
 [0 0 0 ... 0 0 0]]
final sparse array
[[1 1 1 ... 1 1 1]
 [1 1 1 ... 1 1 1]
 [0 0 0 ... 0 0 0]
 ...
 [1 1 1 ... 1 1 1]
 [1 1 1 ... 1 1 1]
 [0 0 0 ... 0 0 0]]
after multiplying
(363, 96)
[[  100   463   826 ... 33859 34222 34585]
 [  101   464   827 ... 33860 34223 34586]
 [    0     0     0 ...     0     0     0]
 ...
 [  460   823  1186 ... 34219 34582 34945]
 [  461   824  1187 ... 34220 34583 34946]
 [    0     0     0 ...     0     0     0]]
after reducing the filter array based on sparsity
[[  100   101   104 ...   457   460   461]
 [  463   464   467 ...   820   823   824]
 [  826   827   830 ...  1183  1186  1187]
 ...
 [33859 33860 33863 ... 34216 34219 34220]
 [34222 34223 34226 ... 34579 34582 34583]
 [34585 34586 34589 ... 34942 34945 34946]]
Final
(182, 96)
[[  100   463   826 ... 33859 34222 34585]
 [  101   464   827 ... 33860 34223 34586]
 [  104   467   830 ... 33863 34226 34589]
 ...
 [  457   820  1183 ... 34216 34579 34942]
 [  460   823  1186 ... 34219 34582 34945]
 [  461   824  1187 ... 34220 34583 34946]]
INSIDE INPUT FILTER DEMAND MATRIX CREATION FUNCTION
self.batch_size in ifmap function is  1
self.ifmap_addr_matrix
(3025, 363)
[[     0      1      2 ...   6750   6751   6752]
 [    12     13     14 ...   6762   6763   6764]
 [    24     25     26 ...   6774   6775   6776]
 ...
 [145776 145777 145778 ...     -1     -1     -1]
 [145788 145789 145790 ...     -1     -1     -1]
 [145800 145801 145802 ...     -1     -1     -1]]
Input sparsity being applied
[1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1
 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1
 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0
 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0
 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1
 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1
 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0
 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0
 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1
 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0]
[[     0      1      0 ...   6750   6751      0]
 [    12     13      0 ...   6762   6763      0]
 [    24     25      0 ...   6774   6775      0]
 ...
 [145776 145777      0 ...     -1     -1      0]
 [145788 145789      0 ...     -1     -1      0]
 [145800 145801      0 ...     -1     -1      0]]
[[     0      1      4 ...   6747   6750   6751]
 [    12     13     16 ...   6759   6762   6763]
 [    24     25     28 ...   6771   6774   6775]
 ...
 [145776 145777 145780 ...     -1     -1     -1]
 [145788 145789 145792 ...     -1     -1     -1]
 [145800 145801 145804 ...     -1     -1     -1]]
self.ifmap_addr_matrix for sparsity
[[     0      1      4 ...   6747   6750   6751]
 [    12     13     16 ...   6759   6762   6763]
 [    24     25     28 ...   6771   6774   6775]
 ...
 [145776 145777 145780 ...     -1     -1     -1]
 [145788 145789 145792 ...     -1     -1     -1]
 [145800 145801 145804 ...     -1     -1     -1]]
col_indices
[ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71
 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95]
self.ofmap_addr_matrix
[[   200    201    202 ...    293    294    295]
 [   296    297    298 ...    389    390    391]
 [   392    393    394 ...    485    486    487]
 ...
 [290312 290313 290314 ... 290405 290406 290407]
 [290408 290409 290410 ... 290501 290502 290503]
 [290504 290505 290506 ... 290597 290598 290599]]
these are the operand matrices
(3025, 182)
(182, 96)
(3025, 96)
[[     0      1      4 ...   6747   6750   6751]
 [    12     13     16 ...   6759   6762   6763]
 [    24     25     28 ...   6771   6774   6775]
 ...
 [145776 145777 145780 ...     -1     -1     -1]
 [145788 145789 145792 ...     -1     -1     -1]
 [145800 145801 145804 ...     -1     -1     -1]]
[[  100   463   826 ... 33859 34222 34585]
 [  101   464   827 ... 33860 34223 34586]
 [  104   467   830 ... 33863 34226 34589]
 ...
 [  457   820  1183 ... 34216 34579 34942]
 [  460   823  1186 ... 34219 34582 34945]
 [  461   824  1187 ... 34220 34583 34946]]
[[   200    201    202 ...    293    294    295]
 [   296    297    298 ...    389    390    391]
 [   392    393    394 ...    485    486    487]
 ...
 [290312 290313 290314 ... 290405 290406 290407]
 [290408 290409 290410 ... 290501 290502 290503]
 [290504 290505 290506 ... 290597 290598 290599]]
layer_calc_params[0] * layer_calc_params[1] * num_filters =  55 55 96
self.num_compute = self.topo.get_layer_num_ofmap_px(self.layer_id) * self.topo.get_layer_window_size(self.layer_id)
Nofmap: Number of OFMAP pixels generated by filter
layer_calc_params[0] * layer_calc_params[1] * num_filters =  55 55 96
105415200 = 290400 * 363
self.layer_id  0
filter matrix in create_filter_prefetch_mat
[[  100   463   826 ... 33859 34222 34585]
 [  101   464   827 ... 33860 34223 34586]
 [  104   467   830 ... 33863 34226 34589]
 ...
 [  457   820  1183 ... 34216 34579 34942]
 [  460   823  1186 ... 34219 34582 34945]
 [  461   824  1187 ... 34220 34583 34946]]
End
printing self.filter_prefetch_matrix is ws.py
[[ 1.000e+02  4.630e+02  8.260e+02 ... -1.000e+00 -1.000e+00 -1.000e+00]
 [ 1.010e+02  4.640e+02  8.270e+02 ... -1.000e+00 -1.000e+00 -1.000e+00]
 [ 1.040e+02  4.670e+02  8.300e+02 ... -1.000e+00 -1.000e+00 -1.000e+00]
 ...
 [ 4.570e+02  8.200e+02  1.183e+03 ... -1.000e+00 -1.000e+00 -1.000e+00]
 [ 4.600e+02  8.230e+02  1.186e+03 ... -1.000e+00 -1.000e+00 -1.000e+00]
 [ 4.610e+02  8.240e+02  1.187e+03 ... -1.000e+00 -1.000e+00 -1.000e+00]]
774400.0
1101100.0
printing self.filter_demand_matrix in ws.py
[[ 3.530e+02  7.160e+02  1.079e+03 ... -1.000e+00 -1.000e+00 -1.000e+00]
 [ 3.520e+02  7.150e+02  1.078e+03 ... -1.000e+00 -1.000e+00 -1.000e+00]
 [ 3.490e+02  7.120e+02  1.075e+03 ... -1.000e+00 -1.000e+00 -1.000e+00]
 ...
 [-1.000e+00 -1.000e+00 -1.000e+00 ... -1.000e+00 -1.000e+00 -1.000e+00]
 [-1.000e+00 -1.000e+00 -1.000e+00 ... -1.000e+00 -1.000e+00 -1.000e+00]
 [-1.000e+00 -1.000e+00 -1.000e+00 ... -1.000e+00 -1.000e+00 -1.000e+00]]
These are the demand matrices
ifmap_demand_mat demand matrix
[[-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]
 ...
 [-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]]
filter_demand_mat demand matrix
[[ 3.530e+02  7.160e+02  1.079e+03 ... -1.000e+00 -1.000e+00 -1.000e+00]
 [ 3.520e+02  7.150e+02  1.078e+03 ... -1.000e+00 -1.000e+00 -1.000e+00]
 [ 3.490e+02  7.120e+02  1.075e+03 ... -1.000e+00 -1.000e+00 -1.000e+00]
 ...
 [-1.000e+00 -1.000e+00 -1.000e+00 ... -1.000e+00 -1.000e+00 -1.000e+00]
 [-1.000e+00 -1.000e+00 -1.000e+00 ... -1.000e+00 -1.000e+00 -1.000e+00]
 [-1.000e+00 -1.000e+00 -1.000e+00 ... -1.000e+00 -1.000e+00 -1.000e+00]]
ofmap_demand_mat demand matrix
[[-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]
 ...
 [-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]]
Compute cycles: 6813
Stall cycles: 0
Overall utilization: 94.44%
Mapping efficiency: 53.32%
Average IFMAP SRAM BW: 1777.792 words/cycle
Average Filter SRAM BW: 2.565 words/cycle
Average Filter Metadata SRAM BW: 0.160 words/cycle
Average OFMAP SRAM BW: 85.249 words/cycle
Average IFMAP DRAM BW: 50.000 words/cycle
Average Filter DRAM BW: 50.000 words/cycle
Average OFMAP DRAM BW: 50.000 words/cycle

Running Layer 1
self.filter_addr_matrix
(2400, 256)
[[   100   2500   4900 ... 607300 609700 612100]
 [   101   2501   4901 ... 607301 609701 612101]
 [   102   2502   4902 ... 607302 609702 612102]
 ...
 [  2497   4897   7297 ... 609697 612097 614497]
 [  2498   4898   7298 ... 609698 612098 614498]
 [  2499   4899   7299 ... 609699 612099 614499]]
SPARSITY INSIDE FILTER DEMAND MATRIX CREATION
No sparsity file - creating bitmap
[[1 1 1 ... 1 1 1]
 [1 1 1 ... 1 1 1]
 [0 0 0 ... 0 0 0]
 ...
 [1 1 1 ... 1 1 1]
 [0 0 0 ... 0 0 0]
 [0 0 0 ... 0 0 0]]
final sparse array
[[1 1 1 ... 1 1 1]
 [1 1 1 ... 1 1 1]
 [0 0 0 ... 0 0 0]
 ...
 [1 1 1 ... 1 1 1]
 [0 0 0 ... 0 0 0]
 [0 0 0 ... 0 0 0]]
after multiplying
(2400, 256)
[[   100   2500   4900 ... 607300 609700 612100]
 [   101   2501   4901 ... 607301 609701 612101]
 [     0      0      0 ...      0      0      0]
 ...
 [  2497   4897   7297 ... 609697 612097 614497]
 [     0      0      0 ...      0      0      0]
 [     0      0      0 ...      0      0      0]]
after reducing the filter array based on sparsity
[[   100    101    104 ...   2493   2496   2497]
 [  2500   2501   2504 ...   4893   4896   4897]
 [  4900   4901   4904 ...   7293   7296   7297]
 ...
 [607300 607301 607304 ... 609693 609696 609697]
 [609700 609701 609704 ... 612093 612096 612097]
 [612100 612101 612104 ... 614493 614496 614497]]
Final
(1200, 256)
[[   100   2500   4900 ... 607300 609700 612100]
 [   101   2501   4901 ... 607301 609701 612101]
 [   104   2504   4904 ... 607304 609704 612104]
 ...
 [  2493   4893   7293 ... 609693 612093 614493]
 [  2496   4896   7296 ... 609696 612096 614496]
 [  2497   4897   7297 ... 609697 612097 614497]]
INSIDE INPUT FILTER DEMAND MATRIX CREATION FUNCTION
self.batch_size in ifmap function is  1
self.ifmap_addr_matrix
(41209, 2400)
[[      0       1       2 ...   79965   79966   79967]
 [     96      97      98 ...   80061   80062   80063]
 [    192     193     194 ...   80157   80158   80159]
 ...
 [4033344 4033345 4033346 ... 4113309 4113310 4113311]
 [4033440 4033441 4033442 ... 4113405 4113406 4113407]
 [4033536 4033537 4033538 ... 4113501 4113502 4113503]]
Input sparsity being applied
[1 1 0 ... 1 0 0]
[[      0       1       0 ...   79965       0       0]
 [     96      97       0 ...   80061       0       0]
 [    192     193       0 ...   80157       0       0]
 ...
 [4033344 4033345       0 ... 4113309       0       0]
 [4033440 4033441       0 ... 4113405       0       0]
 [4033536 4033537       0 ... 4113501       0       0]]
[[      0       1       4 ...   79961   79964   79965]
 [     96      97     100 ...   80057   80060   80061]
 [    192     193     196 ...   80153   80156   80157]
 ...
 [4033344 4033345 4033348 ... 4113305 4113308 4113309]
 [4033440 4033441 4033444 ... 4113401 4113404 4113405]
 [4033536 4033537 4033540 ... 4113497 4113500 4113501]]
self.ifmap_addr_matrix for sparsity
[[      0       1       4 ...   79961   79964   79965]
 [     96      97     100 ...   80057   80060   80061]
 [    192     193     196 ...   80153   80156   80157]
 ...
 [4033344 4033345 4033348 ... 4113305 4113308 4113309]
 [4033440 4033441 4033444 ... 4113401 4113404 4113405]
 [4033536 4033537 4033540 ... 4113497 4113500 4113501]]
col_indices
[  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17
  18  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35
  36  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53
  54  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71
  72  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89
  90  91  92  93  94  95  96  97  98  99 100 101 102 103 104 105 106 107
 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125
 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143
 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161
 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179
 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197
 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215
 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233
 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251
 252 253 254 255]
self.ofmap_addr_matrix
[[     200      201      202 ...      453      454      455]
 [     456      457      458 ...      709      710      711]
 [     712      713      714 ...      965      966      967]
 ...
 [10548936 10548937 10548938 ... 10549189 10549190 10549191]
 [10549192 10549193 10549194 ... 10549445 10549446 10549447]
 [10549448 10549449 10549450 ... 10549701 10549702 10549703]]
these are the operand matrices
(41209, 1200)
(1200, 256)
(41209, 256)
[[      0       1       4 ...   79961   79964   79965]
 [     96      97     100 ...   80057   80060   80061]
 [    192     193     196 ...   80153   80156   80157]
 ...
 [4033344 4033345 4033348 ... 4113305 4113308 4113309]
 [4033440 4033441 4033444 ... 4113401 4113404 4113405]
 [4033536 4033537 4033540 ... 4113497 4113500 4113501]]
[[   100   2500   4900 ... 607300 609700 612100]
 [   101   2501   4901 ... 607301 609701 612101]
 [   104   2504   4904 ... 607304 609704 612104]
 ...
 [  2493   4893   7293 ... 609693 612093 614493]
 [  2496   4896   7296 ... 609696 612096 614496]
 [  2497   4897   7297 ... 609697 612097 614497]]
[[     200      201      202 ...      453      454      455]
 [     456      457      458 ...      709      710      711]
 [     712      713      714 ...      965      966      967]
 ...
 [10548936 10548937 10548938 ... 10549189 10549190 10549191]
 [10549192 10549193 10549194 ... 10549445 10549446 10549447]
 [10549448 10549449 10549450 ... 10549701 10549702 10549703]]
layer_calc_params[0] * layer_calc_params[1] * num_filters =  203 203 256
self.num_compute = self.topo.get_layer_num_ofmap_px(self.layer_id) * self.topo.get_layer_window_size(self.layer_id)
Nofmap: Number of OFMAP pixels generated by filter
layer_calc_params[0] * layer_calc_params[1] * num_filters =  203 203 256
25318809600 = 10549504 * 2400
self.layer_id  1
filter matrix in create_filter_prefetch_mat
[[   100   2500   4900 ... 607300 609700 612100]
 [   101   2501   4901 ... 607301 609701 612101]
 [   104   2504   4904 ... 607304 609704 612104]
 ...
 [  2493   4893   7293 ... 609693 612093 614493]
 [  2496   4896   7296 ... 609696 612096 614496]
 [  2497   4897   7297 ... 609697 612097 614497]]
End
printing self.filter_prefetch_matrix is ws.py
[[   100   2500   4900 ... 300100 302500 304900]
 [   101   2501   4901 ... 300101 302501 304901]
 [   104   2504   4904 ... 300104 302504 304904]
 ...
 [309693 312093 314493 ... 609693 612093 614493]
 [309696 312096 314496 ... 609696 612096 614496]
 [309697 312097 314497 ... 609697 612097 614497]]
10549504.0
21099008.0
31648512.0
42198016.0
52747520.0
63297024.0
73846528.0
84396032.0
94945536.0
98901600.0
109451104.0
120000608.0
130550112.0
141099616.0
151649120.0
162198624.0
172748128.0
183297632.0
193847136.0
197803200.0
printing self.filter_demand_matrix in ws.py
[[ 3.53000e+02  2.75300e+03  5.15300e+03 ...  3.00353e+05  3.02753e+05
   3.05153e+05]
 [ 3.52000e+02  2.75200e+03  5.15200e+03 ...  3.00352e+05  3.02752e+05
   3.05152e+05]
 [ 3.49000e+02  2.74900e+03  5.14900e+03 ...  3.00349e+05  3.02749e+05
   3.05149e+05]
 ...
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]]
These are the demand matrices
ifmap_demand_mat demand matrix
[[-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]
 ...
 [-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]]
filter_demand_mat demand matrix
[[ 3.53000e+02  2.75300e+03  5.15300e+03 ...  3.00353e+05  3.02753e+05
   3.05153e+05]
 [ 3.52000e+02  2.75200e+03  5.15200e+03 ...  3.00352e+05  3.02752e+05
   3.05152e+05]
 [ 3.49000e+02  2.74900e+03  5.14900e+03 ...  3.00349e+05  3.02749e+05
   3.05149e+05]
 ...
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]]
ofmap_demand_mat demand matrix
[[-1.0000000e+00 -1.0000000e+00 -1.0000000e+00 ... -1.0000000e+00
  -1.0000000e+00 -1.0000000e+00]
 [-1.0000000e+00 -1.0000000e+00 -1.0000000e+00 ... -1.0000000e+00
  -1.0000000e+00 -1.0000000e+00]
 [-1.0000000e+00 -1.0000000e+00 -1.0000000e+00 ... -1.0000000e+00
  -1.0000000e+00 -1.0000000e+00]
 ...
 [-1.0000000e+00 -1.0000000e+00 -1.0000000e+00 ...  1.0549701e+07
   1.0549446e+07  1.0549191e+07]
 [-1.0000000e+00 -1.0000000e+00 -1.0000000e+00 ... -1.0000000e+00
   1.0549702e+07  1.0549447e+07]
 [-1.0000000e+00 -1.0000000e+00 -1.0000000e+00 ... -1.0000000e+00
  -1.0000000e+00  1.0549703e+07]]
Compute cycles: 831819
Stall cycles: 0
Overall utilization: 185.78%
Mapping efficiency: 93.75%
Average IFMAP SRAM BW: 1188.980 words/cycle
Average Filter SRAM BW: 0.369 words/cycle
Average Filter Metadata SRAM BW: 0.023 words/cycle
Average OFMAP SRAM BW: 126.825 words/cycle
Average IFMAP DRAM BW: 50.000 words/cycle
Average Filter DRAM BW: 50.000 words/cycle
Average OFMAP DRAM BW: 71.291 words/cycle

Running Layer 2
self.filter_addr_matrix
(2304, 384)
[[   100   2404   4708 ... 877924 880228 882532]
 [   101   2405   4709 ... 877925 880229 882533]
 [   102   2406   4710 ... 877926 880230 882534]
 ...
 [  2401   4705   7009 ... 880225 882529 884833]
 [  2402   4706   7010 ... 880226 882530 884834]
 [  2403   4707   7011 ... 880227 882531 884835]]
SPARSITY INSIDE FILTER DEMAND MATRIX CREATION
No sparsity file - creating bitmap
[[1 1 1 ... 1 1 1]
 [1 1 1 ... 1 1 1]
 [0 0 0 ... 0 0 0]
 ...
 [1 1 1 ... 1 1 1]
 [0 0 0 ... 0 0 0]
 [0 0 0 ... 0 0 0]]
final sparse array
[[1 1 1 ... 1 1 1]
 [1 1 1 ... 1 1 1]
 [0 0 0 ... 0 0 0]
 ...
 [1 1 1 ... 1 1 1]
 [0 0 0 ... 0 0 0]
 [0 0 0 ... 0 0 0]]
after multiplying
(2304, 384)
[[   100   2404   4708 ... 877924 880228 882532]
 [   101   2405   4709 ... 877925 880229 882533]
 [     0      0      0 ...      0      0      0]
 ...
 [  2401   4705   7009 ... 880225 882529 884833]
 [     0      0      0 ...      0      0      0]
 [     0      0      0 ...      0      0      0]]
after reducing the filter array based on sparsity
[[   100    101    104 ...   2397   2400   2401]
 [  2404   2405   2408 ...   4701   4704   4705]
 [  4708   4709   4712 ...   7005   7008   7009]
 ...
 [877924 877925 877928 ... 880221 880224 880225]
 [880228 880229 880232 ... 882525 882528 882529]
 [882532 882533 882536 ... 884829 884832 884833]]
Final
(1152, 384)
[[   100   2404   4708 ... 877924 880228 882532]
 [   101   2405   4709 ... 877925 880229 882533]
 [   104   2408   4712 ... 877928 880232 882536]
 ...
 [  2397   4701   7005 ... 880221 882525 884829]
 [  2400   4704   7008 ... 880224 882528 884832]
 [  2401   4705   7009 ... 880225 882529 884833]]
INSIDE INPUT FILTER DEMAND MATRIX CREATION FUNCTION
self.batch_size in ifmap function is  1
self.ifmap_addr_matrix
(121, 2304)
[[    0     1     2 ...  7421  7422  7423]
 [  256   257   258 ...  7677  7678  7679]
 [  512   513   514 ...  7933  7934  7935]
 ...
 [35328 35329 35330 ... 42749 42750 42751]
 [35584 35585 35586 ... 43005 43006 43007]
 [35840 35841 35842 ... 43261 43262 43263]]
Input sparsity being applied
[1 1 0 ... 1 0 0]
[[    0     1     0 ...  7421     0     0]
 [  256   257     0 ...  7677     0     0]
 [  512   513     0 ...  7933     0     0]
 ...
 [35328 35329     0 ... 42749     0     0]
 [35584 35585     0 ... 43005     0     0]
 [35840 35841     0 ... 43261     0     0]]
[[    0     1     4 ...  7417  7420  7421]
 [  256   257   260 ...  7673  7676  7677]
 [  512   513   516 ...  7929  7932  7933]
 ...
 [35328 35329 35332 ... 42745 42748 42749]
 [35584 35585 35588 ... 43001 43004 43005]
 [35840 35841 35844 ... 43257 43260 43261]]
self.ifmap_addr_matrix for sparsity
[[    0     1     4 ...  7417  7420  7421]
 [  256   257   260 ...  7673  7676  7677]
 [  512   513   516 ...  7929  7932  7933]
 ...
 [35328 35329 35332 ... 42745 42748 42749]
 [35584 35585 35588 ... 43001 43004 43005]
 [35840 35841 35844 ... 43257 43260 43261]]
col_indices
[  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17
  18  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35
  36  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53
  54  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71
  72  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89
  90  91  92  93  94  95  96  97  98  99 100 101 102 103 104 105 106 107
 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125
 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143
 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161
 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179
 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197
 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215
 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233
 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251
 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269
 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287
 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305
 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323
 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341
 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359
 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377
 378 379 380 381 382 383]
self.ofmap_addr_matrix
[[  200   201   202 ...   581   582   583]
 [  584   585   586 ...   965   966   967]
 [  968   969   970 ...  1349  1350  1351]
 ...
 [45512 45513 45514 ... 45893 45894 45895]
 [45896 45897 45898 ... 46277 46278 46279]
 [46280 46281 46282 ... 46661 46662 46663]]
these are the operand matrices
(121, 1152)
(1152, 384)
(121, 384)
[[    0     1     4 ...  7417  7420  7421]
 [  256   257   260 ...  7673  7676  7677]
 [  512   513   516 ...  7929  7932  7933]
 ...
 [35328 35329 35332 ... 42745 42748 42749]
 [35584 35585 35588 ... 43001 43004 43005]
 [35840 35841 35844 ... 43257 43260 43261]]
[[   100   2404   4708 ... 877924 880228 882532]
 [   101   2405   4709 ... 877925 880229 882533]
 [   104   2408   4712 ... 877928 880232 882536]
 ...
 [  2397   4701   7005 ... 880221 882525 884829]
 [  2400   4704   7008 ... 880224 882528 884832]
 [  2401   4705   7009 ... 880225 882529 884833]]
[[  200   201   202 ...   581   582   583]
 [  584   585   586 ...   965   966   967]
 [  968   969   970 ...  1349  1350  1351]
 ...
 [45512 45513 45514 ... 45893 45894 45895]
 [45896 45897 45898 ... 46277 46278 46279]
 [46280 46281 46282 ... 46661 46662 46663]]
layer_calc_params[0] * layer_calc_params[1] * num_filters =  11 11 384
self.num_compute = self.topo.get_layer_num_ofmap_px(self.layer_id) * self.topo.get_layer_window_size(self.layer_id)
Nofmap: Number of OFMAP pixels generated by filter
layer_calc_params[0] * layer_calc_params[1] * num_filters =  11 11 384
107053056 = 46464 * 2304
self.layer_id  2
filter matrix in create_filter_prefetch_mat
[[   100   2404   4708 ... 877924 880228 882532]
 [   101   2405   4709 ... 877925 880229 882533]
 [   104   2408   4712 ... 877928 880232 882536]
 ...
 [  2397   4701   7005 ... 880221 882525 884829]
 [  2400   4704   7008 ... 880224 882528 884832]
 [  2401   4705   7009 ... 880225 882529 884833]]
End
printing self.filter_prefetch_matrix is ws.py
[[   100   2404   4708 ... 288100 290404 292708]
 [   101   2405   4709 ... 288101 290405 292709]
 [   104   2408   4712 ... 288104 290408 292712]
 ...
 [592221 594525 596829 ... 880221 882525 884829]
 [592224 594528 596832 ... 880224 882528 884832]
 [592225 594529 596833 ... 880225 882529 884833]]
30976.0
61952.0
92928.0
123904.0
154880.0
185856.0
216832.0
247808.0
278784.0
309760.0
340736.0
371712.0
402688.0
433664.0
464640.0
495616.0
526592.0
557568.0
588544.0
619520.0
650496.0
681472.0
712448.0
743424.0
774400.0
805376.0
836352.0
printing self.filter_demand_matrix in ws.py
[[ 3.53000e+02  2.65700e+03  4.96100e+03 ...  2.88353e+05  2.90657e+05
   2.92961e+05]
 [ 3.52000e+02  2.65600e+03  4.96000e+03 ...  2.88352e+05  2.90656e+05
   2.92960e+05]
 [ 3.49000e+02  2.65300e+03  4.95700e+03 ...  2.88349e+05  2.90653e+05
   2.92957e+05]
 ...
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]]
These are the demand matrices
ifmap_demand_mat demand matrix
[[-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]
 ...
 [-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]]
filter_demand_mat demand matrix
[[ 3.53000e+02  2.65700e+03  4.96100e+03 ...  2.88353e+05  2.90657e+05
   2.92961e+05]
 [ 3.52000e+02  2.65600e+03  4.96000e+03 ...  2.88352e+05  2.90656e+05
   2.92960e+05]
 [ 3.49000e+02  2.65300e+03  4.95700e+03 ...  2.88349e+05  2.90653e+05
   2.92957e+05]
 ...
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]]
ofmap_demand_mat demand matrix
[[-1.0000e+00 -1.0000e+00 -1.0000e+00 ... -1.0000e+00 -1.0000e+00
  -1.0000e+00]
 [-1.0000e+00 -1.0000e+00 -1.0000e+00 ... -1.0000e+00 -1.0000e+00
  -1.0000e+00]
 [-1.0000e+00 -1.0000e+00 -1.0000e+00 ... -1.0000e+00 -1.0000e+00
  -1.0000e+00]
 ...
 [-1.0000e+00 -1.0000e+00 -1.0000e+00 ...  4.6661e+04  4.6278e+04
   4.5895e+04]
 [-1.0000e+00 -1.0000e+00 -1.0000e+00 ... -1.0000e+00  4.6662e+04
   4.6279e+04]
 [-1.0000e+00 -1.0000e+00 -1.0000e+00 ... -1.0000e+00 -1.0000e+00
   4.6663e+04]]
Compute cycles: 13580
Stall cycles: 0
Overall utilization: 48.11%
Mapping efficiency: 100.00%
Average IFMAP SRAM BW: 184.761 words/cycle
Average Filter SRAM BW: 32.575 words/cycle
Average Filter Metadata SRAM BW: 2.036 words/cycle
Average OFMAP SRAM BW: 30.794 words/cycle
Average IFMAP DRAM BW: 50.000 words/cycle
Average Filter DRAM BW: 50.000 words/cycle
Average OFMAP DRAM BW: 49.997 words/cycle

Running Layer 3
self.filter_addr_matrix
(3456, 384)
[[    100    3556    7012 ... 1316836 1320292 1323748]
 [    101    3557    7013 ... 1316837 1320293 1323749]
 [    102    3558    7014 ... 1316838 1320294 1323750]
 ...
 [   3553    7009   10465 ... 1320289 1323745 1327201]
 [   3554    7010   10466 ... 1320290 1323746 1327202]
 [   3555    7011   10467 ... 1320291 1323747 1327203]]
SPARSITY INSIDE FILTER DEMAND MATRIX CREATION
No sparsity file - creating bitmap
[[1 1 1 ... 1 1 1]
 [1 1 1 ... 1 1 1]
 [0 0 0 ... 0 0 0]
 ...
 [1 1 1 ... 1 1 1]
 [0 0 0 ... 0 0 0]
 [0 0 0 ... 0 0 0]]
final sparse array
[[1 1 1 ... 1 1 1]
 [1 1 1 ... 1 1 1]
 [0 0 0 ... 0 0 0]
 ...
 [1 1 1 ... 1 1 1]
 [0 0 0 ... 0 0 0]
 [0 0 0 ... 0 0 0]]
after multiplying
(3456, 384)
[[    100    3556    7012 ... 1316836 1320292 1323748]
 [    101    3557    7013 ... 1316837 1320293 1323749]
 [      0       0       0 ...       0       0       0]
 ...
 [   3553    7009   10465 ... 1320289 1323745 1327201]
 [      0       0       0 ...       0       0       0]
 [      0       0       0 ...       0       0       0]]
after reducing the filter array based on sparsity
[[    100     101     104 ...    3549    3552    3553]
 [   3556    3557    3560 ...    7005    7008    7009]
 [   7012    7013    7016 ...   10461   10464   10465]
 ...
 [1316836 1316837 1316840 ... 1320285 1320288 1320289]
 [1320292 1320293 1320296 ... 1323741 1323744 1323745]
 [1323748 1323749 1323752 ... 1327197 1327200 1327201]]
Final
(1728, 384)
[[    100    3556    7012 ... 1316836 1320292 1323748]
 [    101    3557    7013 ... 1316837 1320293 1323749]
 [    104    3560    7016 ... 1316840 1320296 1323752]
 ...
 [   3549    7005   10461 ... 1320285 1323741 1327197]
 [   3552    7008   10464 ... 1320288 1323744 1327200]
 [   3553    7009   10465 ... 1320289 1323745 1327201]]
INSIDE INPUT FILTER DEMAND MATRIX CREATION FUNCTION
self.batch_size in ifmap function is  1
self.ifmap_addr_matrix
(121, 3456)
[[    0     1     2 ... 11133 11134 11135]
 [  384   385   386 ... 11517 11518 11519]
 [  768   769   770 ... 11901 11902 11903]
 ...
 [52992 52993 52994 ... 64125 64126 64127]
 [53376 53377 53378 ... 64509 64510 64511]
 [53760 53761 53762 ... 64893 64894 64895]]
Input sparsity being applied
[1 1 0 ... 1 0 0]
[[    0     1     0 ... 11133     0     0]
 [  384   385     0 ... 11517     0     0]
 [  768   769     0 ... 11901     0     0]
 ...
 [52992 52993     0 ... 64125     0     0]
 [53376 53377     0 ... 64509     0     0]
 [53760 53761     0 ... 64893     0     0]]
[[    0     1     4 ... 11129 11132 11133]
 [  384   385   388 ... 11513 11516 11517]
 [  768   769   772 ... 11897 11900 11901]
 ...
 [52992 52993 52996 ... 64121 64124 64125]
 [53376 53377 53380 ... 64505 64508 64509]
 [53760 53761 53764 ... 64889 64892 64893]]
self.ifmap_addr_matrix for sparsity
[[    0     1     4 ... 11129 11132 11133]
 [  384   385   388 ... 11513 11516 11517]
 [  768   769   772 ... 11897 11900 11901]
 ...
 [52992 52993 52996 ... 64121 64124 64125]
 [53376 53377 53380 ... 64505 64508 64509]
 [53760 53761 53764 ... 64889 64892 64893]]
col_indices
[  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17
  18  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35
  36  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53
  54  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71
  72  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89
  90  91  92  93  94  95  96  97  98  99 100 101 102 103 104 105 106 107
 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125
 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143
 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161
 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179
 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197
 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215
 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233
 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251
 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269
 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287
 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305
 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323
 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341
 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359
 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377
 378 379 380 381 382 383]
self.ofmap_addr_matrix
[[  200   201   202 ...   581   582   583]
 [  584   585   586 ...   965   966   967]
 [  968   969   970 ...  1349  1350  1351]
 ...
 [45512 45513 45514 ... 45893 45894 45895]
 [45896 45897 45898 ... 46277 46278 46279]
 [46280 46281 46282 ... 46661 46662 46663]]
these are the operand matrices
(121, 1728)
(1728, 384)
(121, 384)
[[    0     1     4 ... 11129 11132 11133]
 [  384   385   388 ... 11513 11516 11517]
 [  768   769   772 ... 11897 11900 11901]
 ...
 [52992 52993 52996 ... 64121 64124 64125]
 [53376 53377 53380 ... 64505 64508 64509]
 [53760 53761 53764 ... 64889 64892 64893]]
[[    100    3556    7012 ... 1316836 1320292 1323748]
 [    101    3557    7013 ... 1316837 1320293 1323749]
 [    104    3560    7016 ... 1316840 1320296 1323752]
 ...
 [   3549    7005   10461 ... 1320285 1323741 1327197]
 [   3552    7008   10464 ... 1320288 1323744 1327200]
 [   3553    7009   10465 ... 1320289 1323745 1327201]]
[[  200   201   202 ...   581   582   583]
 [  584   585   586 ...   965   966   967]
 [  968   969   970 ...  1349  1350  1351]
 ...
 [45512 45513 45514 ... 45893 45894 45895]
 [45896 45897 45898 ... 46277 46278 46279]
 [46280 46281 46282 ... 46661 46662 46663]]
layer_calc_params[0] * layer_calc_params[1] * num_filters =  11 11 384
self.num_compute = self.topo.get_layer_num_ofmap_px(self.layer_id) * self.topo.get_layer_window_size(self.layer_id)
Nofmap: Number of OFMAP pixels generated by filter
layer_calc_params[0] * layer_calc_params[1] * num_filters =  11 11 384
160579584 = 46464 * 3456
self.layer_id  3
filter matrix in create_filter_prefetch_mat
[[    100    3556    7012 ... 1316836 1320292 1323748]
 [    101    3557    7013 ... 1316837 1320293 1323749]
 [    104    3560    7016 ... 1316840 1320296 1323752]
 ...
 [   3549    7005   10461 ... 1320285 1323741 1327197]
 [   3552    7008   10464 ... 1320288 1323744 1327200]
 [   3553    7009   10465 ... 1320289 1323745 1327201]]
End
printing self.filter_prefetch_matrix is ws.py
[[    100    3556    7012 ...  432100  435556  439012]
 [    101    3557    7013 ...  432101  435557  439013]
 [    104    3560    7016 ...  432104  435560  439016]
 ...
 [ 888285  891741  895197 ... 1320285 1323741 1327197]
 [ 888288  891744  895200 ... 1320288 1323744 1327200]
 [ 888289  891745  895201 ... 1320289 1323745 1327201]]
30976.0
61952.0
92928.0
123904.0
154880.0
185856.0
216832.0
247808.0
278784.0
309760.0
340736.0
371712.0
402688.0
418176.0
449152.0
480128.0
511104.0
542080.0
573056.0
604032.0
635008.0
665984.0
696960.0
727936.0
758912.0
789888.0
820864.0
836352.0
867328.0
898304.0
929280.0
960256.0
991232.0
1022208.0
1053184.0
1084160.0
1115136.0
1146112.0
1177088.0
1208064.0
1239040.0
1254528.0
printing self.filter_demand_matrix in ws.py
[[ 3.53000e+02  3.80900e+03  7.26500e+03 ...  4.32353e+05  4.35809e+05
   4.39265e+05]
 [ 3.52000e+02  3.80800e+03  7.26400e+03 ...  4.32352e+05  4.35808e+05
   4.39264e+05]
 [ 3.49000e+02  3.80500e+03  7.26100e+03 ...  4.32349e+05  4.35805e+05
   4.39261e+05]
 ...
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]]
These are the demand matrices
ifmap_demand_mat demand matrix
[[-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]
 ...
 [-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]]
filter_demand_mat demand matrix
[[ 3.53000e+02  3.80900e+03  7.26500e+03 ...  4.32353e+05  4.35809e+05
   4.39265e+05]
 [ 3.52000e+02  3.80800e+03  7.26400e+03 ...  4.32352e+05  4.35808e+05
   4.39264e+05]
 [ 3.49000e+02  3.80500e+03  7.26100e+03 ...  4.32349e+05  4.35805e+05
   4.39261e+05]
 ...
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]]
ofmap_demand_mat demand matrix
[[-1.0000e+00 -1.0000e+00 -1.0000e+00 ... -1.0000e+00 -1.0000e+00
  -1.0000e+00]
 [-1.0000e+00 -1.0000e+00 -1.0000e+00 ... -1.0000e+00 -1.0000e+00
  -1.0000e+00]
 [-1.0000e+00 -1.0000e+00 -1.0000e+00 ... -1.0000e+00 -1.0000e+00
  -1.0000e+00]
 ...
 [-1.0000e+00 -1.0000e+00 -1.0000e+00 ...  4.6661e+04  4.6278e+04
   4.5895e+04]
 [-1.0000e+00 -1.0000e+00 -1.0000e+00 ... -1.0000e+00  4.6662e+04
   4.6279e+04]
 [-1.0000e+00 -1.0000e+00 -1.0000e+00 ... -1.0000e+00 -1.0000e+00
   4.6663e+04]]
Compute cycles: 21125
Stall cycles: 0
Overall utilization: 46.40%
Mapping efficiency: 96.43%
Average IFMAP SRAM BW: 178.158 words/cycle
Average Filter SRAM BW: 31.411 words/cycle
Average Filter Metadata SRAM BW: 1.963 words/cycle
Average OFMAP SRAM BW: 30.793 words/cycle
Average IFMAP DRAM BW: 50.000 words/cycle
Average Filter DRAM BW: 50.000 words/cycle
Average OFMAP DRAM BW: 50.000 words/cycle

Running Layer 4
self.filter_addr_matrix
(3456, 256)
[[   100   3556   7012 ... 874468 877924 881380]
 [   101   3557   7013 ... 874469 877925 881381]
 [   102   3558   7014 ... 874470 877926 881382]
 ...
 [  3553   7009  10465 ... 877921 881377 884833]
 [  3554   7010  10466 ... 877922 881378 884834]
 [  3555   7011  10467 ... 877923 881379 884835]]
SPARSITY INSIDE FILTER DEMAND MATRIX CREATION
No sparsity file - creating bitmap
[[1 1 1 ... 1 1 1]
 [1 1 1 ... 1 1 1]
 [0 0 0 ... 0 0 0]
 ...
 [1 1 1 ... 1 1 1]
 [0 0 0 ... 0 0 0]
 [0 0 0 ... 0 0 0]]
final sparse array
[[1 1 1 ... 1 1 1]
 [1 1 1 ... 1 1 1]
 [0 0 0 ... 0 0 0]
 ...
 [1 1 1 ... 1 1 1]
 [0 0 0 ... 0 0 0]
 [0 0 0 ... 0 0 0]]
after multiplying
(3456, 256)
[[   100   3556   7012 ... 874468 877924 881380]
 [   101   3557   7013 ... 874469 877925 881381]
 [     0      0      0 ...      0      0      0]
 ...
 [  3553   7009  10465 ... 877921 881377 884833]
 [     0      0      0 ...      0      0      0]
 [     0      0      0 ...      0      0      0]]
after reducing the filter array based on sparsity
[[   100    101    104 ...   3549   3552   3553]
 [  3556   3557   3560 ...   7005   7008   7009]
 [  7012   7013   7016 ...  10461  10464  10465]
 ...
 [874468 874469 874472 ... 877917 877920 877921]
 [877924 877925 877928 ... 881373 881376 881377]
 [881380 881381 881384 ... 884829 884832 884833]]
Final
(1728, 256)
[[   100   3556   7012 ... 874468 877924 881380]
 [   101   3557   7013 ... 874469 877925 881381]
 [   104   3560   7016 ... 874472 877928 881384]
 ...
 [  3549   7005  10461 ... 877917 881373 884829]
 [  3552   7008  10464 ... 877920 881376 884832]
 [  3553   7009  10465 ... 877921 881377 884833]]
INSIDE INPUT FILTER DEMAND MATRIX CREATION FUNCTION
self.batch_size in ifmap function is  1
self.ifmap_addr_matrix
(121, 3456)
[[    0     1     2 ... 11133 11134 11135]
 [  384   385   386 ... 11517 11518 11519]
 [  768   769   770 ... 11901 11902 11903]
 ...
 [52992 52993 52994 ... 64125 64126 64127]
 [53376 53377 53378 ... 64509 64510 64511]
 [53760 53761 53762 ... 64893 64894 64895]]
Input sparsity being applied
[1 1 0 ... 1 0 0]
[[    0     1     0 ... 11133     0     0]
 [  384   385     0 ... 11517     0     0]
 [  768   769     0 ... 11901     0     0]
 ...
 [52992 52993     0 ... 64125     0     0]
 [53376 53377     0 ... 64509     0     0]
 [53760 53761     0 ... 64893     0     0]]
[[    0     1     4 ... 11129 11132 11133]
 [  384   385   388 ... 11513 11516 11517]
 [  768   769   772 ... 11897 11900 11901]
 ...
 [52992 52993 52996 ... 64121 64124 64125]
 [53376 53377 53380 ... 64505 64508 64509]
 [53760 53761 53764 ... 64889 64892 64893]]
self.ifmap_addr_matrix for sparsity
[[    0     1     4 ... 11129 11132 11133]
 [  384   385   388 ... 11513 11516 11517]
 [  768   769   772 ... 11897 11900 11901]
 ...
 [52992 52993 52996 ... 64121 64124 64125]
 [53376 53377 53380 ... 64505 64508 64509]
 [53760 53761 53764 ... 64889 64892 64893]]
col_indices
[  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17
  18  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35
  36  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53
  54  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71
  72  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89
  90  91  92  93  94  95  96  97  98  99 100 101 102 103 104 105 106 107
 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125
 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143
 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161
 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179
 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197
 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215
 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233
 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251
 252 253 254 255]
self.ofmap_addr_matrix
[[  200   201   202 ...   453   454   455]
 [  456   457   458 ...   709   710   711]
 [  712   713   714 ...   965   966   967]
 ...
 [30408 30409 30410 ... 30661 30662 30663]
 [30664 30665 30666 ... 30917 30918 30919]
 [30920 30921 30922 ... 31173 31174 31175]]
these are the operand matrices
(121, 1728)
(1728, 256)
(121, 256)
[[    0     1     4 ... 11129 11132 11133]
 [  384   385   388 ... 11513 11516 11517]
 [  768   769   772 ... 11897 11900 11901]
 ...
 [52992 52993 52996 ... 64121 64124 64125]
 [53376 53377 53380 ... 64505 64508 64509]
 [53760 53761 53764 ... 64889 64892 64893]]
[[   100   3556   7012 ... 874468 877924 881380]
 [   101   3557   7013 ... 874469 877925 881381]
 [   104   3560   7016 ... 874472 877928 881384]
 ...
 [  3549   7005  10461 ... 877917 881373 884829]
 [  3552   7008  10464 ... 877920 881376 884832]
 [  3553   7009  10465 ... 877921 881377 884833]]
[[  200   201   202 ...   453   454   455]
 [  456   457   458 ...   709   710   711]
 [  712   713   714 ...   965   966   967]
 ...
 [30408 30409 30410 ... 30661 30662 30663]
 [30664 30665 30666 ... 30917 30918 30919]
 [30920 30921 30922 ... 31173 31174 31175]]
layer_calc_params[0] * layer_calc_params[1] * num_filters =  11 11 256
self.num_compute = self.topo.get_layer_num_ofmap_px(self.layer_id) * self.topo.get_layer_window_size(self.layer_id)
Nofmap: Number of OFMAP pixels generated by filter
layer_calc_params[0] * layer_calc_params[1] * num_filters =  11 11 256
107053056 = 30976 * 3456
self.layer_id  4
filter matrix in create_filter_prefetch_mat
[[   100   3556   7012 ... 874468 877924 881380]
 [   101   3557   7013 ... 874469 877925 881381]
 [   104   3560   7016 ... 874472 877928 881384]
 ...
 [  3549   7005  10461 ... 877917 881373 884829]
 [  3552   7008  10464 ... 877920 881376 884832]
 [  3553   7009  10465 ... 877921 881377 884833]]
End
printing self.filter_prefetch_matrix is ws.py
[[   100   3556   7012 ... 432100 435556 439012]
 [   101   3557   7013 ... 432101 435557 439013]
 [   104   3560   7016 ... 432104 435560 439016]
 ...
 [445917 449373 452829 ... 877917 881373 884829]
 [445920 449376 452832 ... 877920 881376 884832]
 [445921 449377 452833 ... 877921 881377 884833]]
30976.0
61952.0
92928.0
123904.0
154880.0
185856.0
216832.0
247808.0
278784.0
309760.0
340736.0
371712.0
402688.0
418176.0
449152.0
480128.0
511104.0
542080.0
573056.0
604032.0
635008.0
665984.0
696960.0
727936.0
758912.0
789888.0
820864.0
836352.0
printing self.filter_demand_matrix in ws.py
[[ 3.53000e+02  3.80900e+03  7.26500e+03 ...  4.32353e+05  4.35809e+05
   4.39265e+05]
 [ 3.52000e+02  3.80800e+03  7.26400e+03 ...  4.32352e+05  4.35808e+05
   4.39264e+05]
 [ 3.49000e+02  3.80500e+03  7.26100e+03 ...  4.32349e+05  4.35805e+05
   4.39261e+05]
 ...
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]]
These are the demand matrices
ifmap_demand_mat demand matrix
[[-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]
 ...
 [-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]
 [-1. -1. -1. ... -1. -1. -1.]]
filter_demand_mat demand matrix
[[ 3.53000e+02  3.80900e+03  7.26500e+03 ...  4.32353e+05  4.35809e+05
   4.39265e+05]
 [ 3.52000e+02  3.80800e+03  7.26400e+03 ...  4.32352e+05  4.35808e+05
   4.39264e+05]
 [ 3.49000e+02  3.80500e+03  7.26100e+03 ...  4.32349e+05  4.35805e+05
   4.39261e+05]
 ...
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]
 [-1.00000e+00 -1.00000e+00 -1.00000e+00 ... -1.00000e+00 -1.00000e+00
  -1.00000e+00]]
ofmap_demand_mat demand matrix
[[-1.0000e+00 -1.0000e+00 -1.0000e+00 ... -1.0000e+00 -1.0000e+00
  -1.0000e+00]
 [-1.0000e+00 -1.0000e+00 -1.0000e+00 ... -1.0000e+00 -1.0000e+00
  -1.0000e+00]
 [-1.0000e+00 -1.0000e+00 -1.0000e+00 ... -1.0000e+00 -1.0000e+00
  -1.0000e+00]
 ...
 [-1.0000e+00 -1.0000e+00 -1.0000e+00 ...  3.1173e+04  3.0918e+04
   3.0663e+04]
 [-1.0000e+00 -1.0000e+00 -1.0000e+00 ... -1.0000e+00  3.1174e+04
   3.0919e+04]
 [-1.0000e+00 -1.0000e+00 -1.0000e+00 ... -1.0000e+00 -1.0000e+00
   3.1175e+04]]
Compute cycles: 14083
Stall cycles: 0
Overall utilization: 46.40%
Mapping efficiency: 96.43%
Average IFMAP SRAM BW: 178.162 words/cycle
Average Filter SRAM BW: 31.411 words/cycle
Average Filter Metadata SRAM BW: 1.963 words/cycle
Average OFMAP SRAM BW: 30.793 words/cycle
Average IFMAP DRAM BW: 50.000 words/cycle
Average Filter DRAM BW: 50.000 words/cycle
Average OFMAP DRAM BW: 49.996 words/cycle
************ SCALE SIM Run Complete ****************
